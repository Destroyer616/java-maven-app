ipeline {
  agent none
  stages {
    stage("build and scan") {
      steps {
              withSonarQubeEnv('Sonarqube_Scanner') {
                sh 'mvn clean package sonar:sonar'
              }        
      }
    }
    stage("quality gate check") {
      steps {
        timeout(time: 2, unit: 'MINUTES') {
        waitForQualityGate abortPipeline: true
        }        
      }
    }
    stage("post quality check") {
        steps {
        sh "echo 'continuing with pipeline'"
      }
    }
  }
}
